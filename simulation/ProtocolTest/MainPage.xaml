<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProtocolTest.MainPage"
             Shell.NavBarIsVisible="False"
             NavigationPage.HasNavigationBar="False"
             BackgroundColor="#0D0D0D">

    <!-- Root grid: [LeftPanel | Handle | Terminal] -->
    <Grid Padding="0">
        <Grid.ColumnDefinitions>
            <!-- Named so we can change width from code-behind -->
            <ColumnDefinition x:Name="ColLeft" Width="260" />
            <ColumnDefinition Width="24" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- LEFT PANEL (full height) -->
        <Grid x:Name="LeftPanel" Grid.Column="0" BackgroundColor="#1A1A1A">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Button x:Name="buttonStart"
                        Text="Start"
                        HeightRequest="40"
                        Clicked="OnStartClicked"
                        BackgroundColor="#3A86FF"
                        TextColor="White"
                        Grid.Row="0" />
                <!-- add more controls here if needed -->
            </Grid>
        </Grid>

        <!-- ALWAYS-VISIBLE HANDLE WITH TOGGLE CHEVRON -->
        <Grid Grid.Column="1" BackgroundColor="#242424">
            <Button x:Name="TogglePaneBtn"
                    Text="&lt;"
                    Clicked="OnTogglePaneClicked"
                    BackgroundColor="Transparent"
                    TextColor="#E0E0E0"
                    FontAttributes="Bold"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    HeightRequest="36"
                    WidthRequest="24"
                    Padding="0" />
        </Grid>

        <!-- TERMINAL (read-only) -->
        <CollectionView x:Name="TerminalView"
                        Grid.Column="2"
                        ItemsSource="{Binding LogLines}"
                        SelectionMode="None"
                        Margin="0"
                        VerticalOptions="Fill"
                        HorizontalOptions="Fill">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="x:String">
                    <Grid Padding="12,2">
                        <Label Text="{Binding .}"
                               LineBreakMode="WordWrap"
                               TextColor="#8AFF80"
                               FontSize="13">
                            <Label.FontFamily>
                                <OnPlatform x:TypeArguments="x:String">
                                    <On Platform="Android" Value="monospace" />
                                    <On Platform="iOS" Value="Menlo" />
                                    <On Platform="MacCatalyst" Value="Menlo" />
                                    <On Platform="WinUI" Value="Consolas" />
                                </OnPlatform>
                            </Label.FontFamily>
                        </Label>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>
